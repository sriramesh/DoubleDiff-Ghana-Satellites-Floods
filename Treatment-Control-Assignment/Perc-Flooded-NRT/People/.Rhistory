# set global options  ----
options(stringsAsFactors = F)
# load packages  ----
library(tidyverse)
library(leaflet)
library(rgdal)
library(htmltools)
library(htmlwidgets)
# read in shapefile  ----
shp <- readOGR("perc_people_flooded_shp", "perc_people_flooded")
# define basemap ----
basemap <- leaflet() %>% addProviderTiles("Stamen.TerrainBackground")
# add polygons ----
m <- basemap %>% addPolygons(data=shp,
color = "none",
weight = 2,
fillOpacity = 0.2)
# shade in chloropleth -----
# define color palette for legend
bins <- c(0.0000, 0.0025, 0.0050, 0.0075, 0.0100, 0.0125, 0.0150, 0.0175, Inf)
pal <- colorBin("Spectral", domain = shp$Perc.Popul, bins = bins)
# make chloropleth
m <- m %>%
addPolygons(data=shp,
fillColor = ~pal(shp$Perc.Popul),
stroke = TRUE,
color = "grey",
weight=1,
dashArray = "",
fillOpacity = 0.35,
highlight = highlightOptions(
weight = 3,
color = "#666",
dashArray = "",
fillOpacity = 0,
bringToFront = TRUE),
label = shp$Perc.Popul,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "15px",
direction = "auto"))
# add legend and title ----
m <- m %>% addLegend(pal = pal,
values = shp$Perc.Popul,
title = "% Flooded - Pop",
position = "topright")
m
